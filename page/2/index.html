<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"naoemb.cf","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="naoemb">
<meta property="og:url" content="https://naoemb.cf/page/2/index.html">
<meta property="og:site_name" content="naoemb">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="naoemb">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://naoemb.cf/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>naoemb</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">naoemb</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>主页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">10</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">65</span></a>

  </li>
        <li class="menu-item menu-item-笔记">

    <a href="/%E7%AC%94%E8%AE%B0" rel="section"><i class="fa fa-sticky-note fa-fw"></i>笔记</a>

  </li>
        <li class="menu-item menu-item-c练习题">

    <a href="/C%E7%BB%83%E4%B9%A0%E9%A2%98/" rel="section"><i class="fa fa-code fa-fw"></i>C练习题</a>

  </li>
        <li class="menu-item menu-item-unix">

    <a href="/UNIX/" rel="section"><i class="fa fa-file-code-o fa-fw"></i>UNIX</a>

  </li>
        <li class="menu-item menu-item-每天英语">

    <a href="/%E6%AF%8F%E5%A4%A9%E8%8B%B1%E8%AF%AD" rel="section"><i class=" fa-fw"></i>每天英语</a>

  </li>
        <li class="menu-item menu-item-musiclist">

    <a href="/musiclist/" rel="section"><i class="fa fa-volume-up fa-fw"></i>歌单</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_17day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_17day/" class="post-title-link" itemprop="url">stm32_note_17day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-07 18:03:39" itemprop="dateModified" datetime="2022-09-07T18:03:39+08:00">2022-09-07</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>13</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="/images/%E6%AF%95%E4%B8%9A%E8%AE%BA%E6%96%87.pptx" title="毕业论文">点击下载 毕业论文.pptx</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_13day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_13day/" class="post-title-link" itemprop="url">stm32_note_13day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 01:55:47" itemprop="dateModified" datetime="2022-09-02T01:55:47+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-8-31<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    串口之I²C
    1.I²C总线中包含两条线(SDA数据线 和 SCL时钟线)
    2.I²C总线上可以连接很多的I²C接口的设备,设备与设备之间都串联起来的
    3.I²C总线规定了,凡是连接到I²C总线上的设备都需要有一个设备地址
        一般来说设备地址是7bit
    4.I²C总线上的设备需要区分主设备和从设备
    5.如果I²C总线上的两个设备都想要和另外的一个设备通信,会触发抢主机制
        抢主机制 : 谁先产生开始信号,谁就优先通信
    6.I²C总线规定了,在空闲状态下SDA和SCL要保持高电平的状态
        所以I²C总线需要外接上拉电阻
    7.开始信号和结束信号
        开始信号 : 在SCL为高电平时,SDA由高电平拉到低电平
        结束信号 : 在SCL为高电平时,SDA由低电平拉到高电平
    8.传输数据
        1)在SCL为低电平的时候,把数据放到SDA数据线上
        2)拉高SCL,延时一段时间,(当SCL为高电平时,SDA保持不变)
        3)拉低SCL,切换下一位数据放到SDA数据线上
    9.传输一个字节数据需要9个周期 = 8个数据周期 + 1个ACK周期
    A.I²C总线属于停等式的流控,传输完一个字节数据需要有应答
    B.产生ACK和读取ACK
        1)产生ACK : 在第9个周期,拉低SCL,把SDA也拉低,拉高SCL
        2)读取ACK : 在第9个周期,当SCL为高电平时,读取SDA的电平
    C.I²C总线是高位先出
    D.主设备给从设备发送数据
        1)主设备产生开始信号
        2)主设备发送从设备的设备地址 + 写的标志(0)
        3)主设备等待ACK
        4)主设备发送一个字节数据
        5)主设备等待ACK
        ...
        n)主设备发送最后一个字节数据
        n+1)主设备可以等待或者不等待ACK
        n+2)主设备产生结束信号
    E.主设备读取从设备的数据
        1)主设备产生开始信号
        2)主设备发送从设备的设备地址 + 读的标志(1)
        3)主设备等待ACK
        4)主设备等待读取一个字节数据
        5)主设备产生ACK
        ...
        n)主设备读取最后一个字节数据
        n+1)主设备不产生ACK
        n+2)主设备产生结束信号
</code></pre>
<h1 id="二-I²C接口设备之E²PROM"><a href="#二-I²C接口设备之E²PROM" class="headerlink" title="二.I²C接口设备之E²PROM"></a>二.I²C接口设备之E²PROM</h1><pre><code>    1.简单了解E²PROM
    E²PROM : 也叫做EEPROM,电可擦除可编程的只读存储器
    作用 : 是一种存储类的设备
    特点 : 存储到E²PROM中的数据,设备掉电之后,数据不会丢失
    注意 : E²PROM并不是硬盘
    应用 : 使用E²PROM存储特殊的数据
    (门禁打卡设备、测量设备、仪器仪表、用来存储BIOS或者BootLoader)
    
    2.ROM的发展历史
    ROM 只读存储器 特点是内部存储的数据只能读取,不能写入或者修改
    PROM 可编程的只读存储器 特点是内部存储的数据可以通过编程方法修改一次
    EPROM 可擦除可编程的只读存储器 特点是内部存储的数据可以修改多次
                    修改方法有限制
                    需要通过紫外线照射存储介质
    EEPROM 电可擦除可编程的只读存储器 特点是内部存储的数据可以修改多次
                    通过电信号即可清除数据
    3.通过手册了解E²PROM
    打开&lt;STM32RBT6\DataSheet\其他&gt;目录下
    &lt;AT24C02_ATMEL Corporation.pdf&gt;
    1)我们的开发板上使用的E²PROM是阿特梅尔公司的模块
    2)使用的是8管脚的封装形式
    (A0 A1 A2&lt;设备地址&gt; GND&lt;接地&gt; SDA&lt;数据线&gt; SCL&lt;时钟线&gt;)
    (WP(写保护) VCC&lt;接电源&gt;)
    3)使用的是I²C接口的E²PROM
    4)规格
    型号	规格	存储大小		Page
    AT24C01	1K	128byte		16个Page
    AT24C02	2K	256byte		32个Page
    AT24C04	4K	512byte		32个Page
    AT24C08	8K	1024byte		64个Page
    AT24C16	16K	2048byte		128个Page
</code></pre>
<p>eeprom<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/13day/eeprom.png"></p>
<pre><code>    5)任何规格的E²PROM的设备地址的高四位都是固定的了1010
        1K/2K规格可以通过A2 A1 A0管脚选择设备地址
        4K规格可以通过A2 A1管脚选择设备地址
        8K规格可以通过A2管脚选择设备地址
        16K规格没有管脚可以选择设备地址
    6)通过开发板原理图的解析可以了解
        我们开发板上的E²PROM的设备地址是
        10100000(写操作的设备地址)0xA0
        10100001(读操作的设备地址)0xA1
    7)写操作
        1&gt;按字节来写
            a&gt;产生开始信号
            b&gt;发送设备地址 + 写的标志(10100000&lt;0xA0&gt;)
            c&gt;等待ACK
            d&gt;发送内部存储空间的地址(0x00 - 0xFF)
            e&gt;等待ACK
            f&gt;发送一个字节数据
            g&gt;等待ACK
            h&gt;产生结束信号
        2&gt;按页来写(注意:有页内回滚)
            a&gt;产生开始信号
            b&gt;发送设备地址 + 写的标志(10100000&lt;0xA0&gt;)
            c&gt;等待ACK
            d&gt;发送内部存储空间的地址(0x00 - 0xFF)
            e&gt;等待ACK
            f&gt;发送一个字节数据
            g&gt;等待ACK
            ...
            n&gt;发送最后一个字节数据
            n+1&gt;等待ACK
            n+2&gt;产生结束信号
</code></pre>
<p>页内回滚<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/13day/%E9%A1%B5%E5%86%85%E5%9B%9E%E6%BB%9A.png"></p>
<pre><code>    8)读操作
        1&gt;当前地址读
            a&gt;产生开始信号
            b&gt;发送设备地址 + 读的标志(10100001&lt;0xA1&gt;)
            c&gt;等待ACK
            d&gt;读取一个字节数据
            e&gt;不产生ACK
            f&gt;产生结束信号
        2&gt;随机地址读
            a&gt;产生开始信号
            b&gt;发送设备地址 + 写的标志(10100000&lt;0xA0&gt;)
            c&gt;等待ACK
            d&gt;发送内部存储空间的地址
            e&gt;等待ACK
            f&gt;产生开始信号
            g&gt;发送设备地址 + 读的标志(10100001&lt;0xA1&gt;)
            h&gt;等待ACK
            i&gt;读取一个字节数据
            j&gt;不产生ACK
            k&gt;产生结束信号
        3&gt;顺序读(整个存储空间的回滚)
            可以直接拼接到当前地址读或者随机地址读的后面
</code></pre>
<h1 id="三-使用GPIO模拟I²C的协议的程序-gt-驱动E²PROM"><a href="#三-使用GPIO模拟I²C的协议的程序-gt-驱动E²PROM" class="headerlink" title="三.使用GPIO模拟I²C的协议的程序-&gt;驱动E²PROM"></a>三.使用GPIO模拟I²C的协议的程序-&gt;驱动E²PROM</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_14day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_14day/" class="post-title-link" itemprop="url">stm32_note_14day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-12 15:22:21" itemprop="dateModified" datetime="2022-09-12T15:22:21+08:00">2022-09-12</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>7.2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-9-1<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    串行的接口
        分类 : USART/UART、I²C、SPI、I²S、CAN、USB、SDI0、Eth
        USART/UART驱动起来了-&gt;WiFi模块是USART的接口
        I²C总线-&gt;使用GPIO模拟I²C的协议-&gt;E²PROM、OLD、SHT30
    E²PROM
        电可擦除可编程的只读存储器
        通过官方手册了解E²PROM
        1)E²PROM使用的是两线串行的接口(I²C的接口)
        2)比较常见的是8管脚的封装形式
        (VCC&lt;接电源&gt; GND&lt;接地&gt; A2 A1 A0&lt;设备地址的输入&gt;)
        (SDA&lt;数据线&gt; SCL&lt;时钟线&gt; WP&lt;写保护&gt;)
        3)规格
        型号	规格	存储大小	页
        AT24C01	1K	128byte	16page
        AT24C02	2K	256byte	32page
        AT24C04	4K	512byte	32page
        AT24C08	8K	1024byte	64page
        AT24C16	16K	2048byte	128page
        4)设备地址
        所有规格的E²PROM的设备地址高四位是固定的1010
        后三位设备地址通过A2 A1 A0进行选择
        最低位是读写标志位
        5)读写操作
        两种写操作
            按字节写和按页写
            
        三种读操作
            当前地址读和随机地址读和顺序读
</code></pre>
<h1 id="二-I²C设备之OLED"><a href="#二-I²C设备之OLED" class="headerlink" title="二.I²C设备之OLED"></a>二.I²C设备之OLED</h1><pre><code>    1.OLED的简介
    OLED叫做有机发光二极管,在嵌入式领域中属于显示类型的设备
    和LCD(液晶显示屏)显示的方法不同,
    LCD在显示时需要背光灯,OLED在显示时不需要背光灯
    显示屏是显示屏,触摸屏是触摸屏,是两个设备
    如果将来操作的设备既有显示屏也有触摸屏,就要写两份驱动程序
    一个是显示屏驱动,一个是触摸屏驱动
    2.屏幕的显示
    屏幕上是由N多个像素点组成的,所以大家平常所说的屏幕分辨率
    指的是像素点的个数
    1024×768
    1920×1080
    之所以屏幕可以显示出各种颜色是因为像素点会在显存中占用存储空间
    像素点会在显存中占用多大的存储空间?
    和像素点的位色有关(位色可以分为16位色和32位色 )
    比如说显示设备是16位色,说明一个像素点在显存中占用16位(2byte)
    比如说显示设备是32位色,说明一个像素点在显存中占用32位(4byte)
    配色方案
    常用的显示设备的配色方案(RGB YUV)
    16位色RGB配色方案	XXXXX YYYYYY ZZZZZ
            R	G	B
        0xF800	全红
        0x07E0	全绿
        0x001F	全蓝
        0xFFFF	全白
        0x0000	全黑
    32位色RGB配色方案	RRRRRRRR XXXXXXXX YYYYYYYY ZZZZZZZZ
            保留的	   R	      G	        B
        0xFF0000	全红
        0xFF00	全绿
        0xFF	全蓝
    3.开发板上的显示屏
    STM32F103-&gt;OLED屏幕-&gt;0.96寸-&gt;128×64-&gt;I²C接口
    STM32F407-&gt;LCD屏幕-&gt;2.8寸-&gt;320×240-&gt;FSMC(内存)接口
    4.从官网找资料
    OLED屏幕-&gt;亿阳电子
</code></pre>
<h1 id="LCD-液晶显示器320-240"><a href="#LCD-液晶显示器320-240" class="headerlink" title="LCD(液晶显示器320 * 240)"></a>LCD(液晶显示器320 * 240)</h1><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><pre><code>    单片机:
    uart(串口屏)
        液晶显示器接的是串口,能通过串口把数据发送给LCD,就能够显示
        例:通过串口把坐标发送过去,再把显示的字符(字的编码)发送过去
        (一般来说这种屏都是自带字库的)		
    spi(SPI总线)
        液晶显示器接的是SPI总线
    sram(内存接口)
        LCD连接到了主芯片的内存接口上的,访问LCD就和访问内存一样,
        通过指针的方式去访问

    SOC : RGB LVDS HDMI VGA MIPI

    我们的stm32开发板的液晶显示用的是sram接口,相当于接到了内存接口上
    所以我们先看一下内存的访问
</code></pre>
<h2 id="内存的访问-通过三总线来访问-lt-01m4的总线和SRAM的总线-gt"><a href="#内存的访问-通过三总线来访问-lt-01m4的总线和SRAM的总线-gt" class="headerlink" title="内存的访问(通过三总线来访问)&lt;01m4的总线和SRAM的总线&gt;"></a>内存的访问(通过三总线来访问)&lt;01m4的总线和SRAM的总线&gt;</h2><p>m4的总线和SRAM的总线<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/01m4%E7%9A%84%E6%80%BB%E7%BA%BF%E5%92%8CSRAM%E7%9A%84%E6%80%BB%E7%BA%BF.png"></p>
<pre><code>    addr	传输地址
    --------------
    --------------
    --------------
    --------------
    data	传输数据
    --------------
    --------------
    ctrl	控制读写时序/片选...

    例:
    假如执行*(int *)0x4 = 1;
    三总线的电平信号应该是这样的
    addr
    第0位地址线--------------0
    第1位地址线--------------0
    第2位地址线--------------1
    第3位地址线--------------0
    data
    第0位数据线--------------1
    第1位数据线--------------0

    假如执行*(int *)0xC = 3;
    三总线的电平信号应该是这样的
    addr
    第0位地址线--------------0
    第1位地址线--------------0
    第2位地址线--------------1
    第3位地址线--------------1
    data
    第0位数据线--------------1
    第1位数据线--------------1

    看&lt;02LCD电路图&gt;
</code></pre>
<p>02LCD电路图<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/02LCD%E7%94%B5%E8%B7%AF%E5%9B%BE.png"></p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a><FSMC_A12>简介</h2><pre><code>    因为FSMC_A12这个管脚只区分地址线的第12位所以(1)和(2) | (3)和(4)执行效果一样
    (1)(*(int *)0x1000) = 2;
    (2)(*(int *)0x1001) = 2;
    (3)(*(int *)0x0000) = 2;
    (4)(*(int *)0x0001) = 2;

    地址线只区分第12位是因为把这一位当作命令来使用,下面我们来区分
    (1)和(3) | (2)和(4)的区别

    LCD的背部是有一个控制芯片(LCD自带)的,
    LCD模块上的引脚是连接控制芯片的,
    控制芯片在控制LCD的显示,
    我们开发板上使用的LCD控制芯片是9341
    
    9341内部有很多寄存器、显存
    当想要在LCD上画点首先需要指定坐标、横屏显示|竖屏显示...
    -------------------------------
    (100, 100)	竖 显示点(红色)
    9341	寄存器0x1234	存储X轴坐标	
        *(int *)0x1234 = 100;
    -------------------------------
    这些信息都需要在9341中的寄存器里设置
    我们之前操作GPIO知道,每一个寄存器都有一个地址,为了和我们的地址总线的地址区分,我们管寄存器的地址叫做[命令cmd]
    当我们将来往寄存器里写数据,我们的LCD是这样规定的
    1.先把命令写过来
    2.再把数据写过来
    ---------------------------------------------------------------
    例 : 假如寄存器的地址[命令]是0x10,想要给这个寄存器写数据2
    0x10 &lt;------- 2
    不管是0x10还是数据2,都是要通过内存接口发送给LCD,走的都是数据线,对于STM32来说&lt;0x10&gt;和&lt;2&gt;都是数据,
    所以发送时必须要区分开,发送的是命令还是数据(用的就是地址线的第12位来区分)
    所以需要知道地址线的第12位是高电平表示命令,还是低电平表示命令
    需要查看&lt;LCD的手册&gt;
    
    地址线的第12位为1的时候表示数据
    地址线的第12位为0的时候表示命令
    1.先把命令写过来
    (*(int *)0x0000) = 0x10;
    2.再把数据写过来
    (*(int *)0x1000) = 2
    执行完这两步操作数据2就写到了&lt;0x10&gt;的那个寄存器中了
    ---------------------------------------------------------------

    对于显存来说也是这样的方式,显存本身就是一段存储空间,内部就会有地址&lt;命令&gt;
    如果在LCD上画一个点
    1.首先把显存的&lt;命令&gt;发过去
    2.再把数据发过去(点的坐标、颜色)

    接下来我们来看看片选
</code></pre>
<h2 id="片选"><a href="#片选" class="headerlink" title="片选"></a>片选</h2><p>片选简介<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/04%E7%89%87%E9%80%89%E7%AE%80%E4%BB%8B.png"></p>
<pre><code>    内存控制器可以支持多个设备(SRAM LCD DM9000...)
    我们查看&lt;STM32手册&gt;中的FSMC来看看我们的内存控制器,可以支持哪些设备

    &lt;P1191&gt;-------PSRAM(4个存储区域)代表有4个片选
    &lt;P1192&gt;-------NOR/PSRAM(我们的LCD接的是这块)
                ---&gt;FSMC_NE[4:1]4个片选
                ---&gt;FSMC_NBL[1:0]控制访问位宽的
                (有可能接8位内存或者接16位内存)
    &lt;P1194&gt;-------NOR/PSRAM
            4 x 64MB可以接4片内存,每片64MB大小
            内存的范围是0x6000 0000 - 0x6FFF FFFF
            每一片内存的地址不会重复,所以
            0x6000 0000	第一片内存起始地址
            
            0x6400 0000	第二片内存起始地址
            
            0x6800 0000	第三片内存起始地址
            
            0x6C00 0000	第四片内存起始地址
    -------------------------------
    31	30	29	28	27	26	25	24
    0	1	1	0	0	0	X	X
    0	1	1	0	0	1	X	X
    0	1	1	0	1	0	X	X
    0	1	1	0	1	1	X	X
    -------------------------------

            
    其实当我们使用第一片内存的空间地址时,自动会让片选1有效(内部译码器已经规定好了)
    我们通过LCD硬件原理图中得到 &lt;FSMC_NE4&gt;说明我们的LCD使用的是片选4
    所以我们将来访问LCD就需要访问 0x6C00 0000 - 0x6FFF FFFF这个地址范围

    通过上面一系列的信息(地址线 + 片选)我们知道了
    往这个地址写的是 0x6C000000 命令
    往这个地址写的是 0x6C001000 数据


    &lt;P1194&gt;表185说的也是片选如果第26和27位
            00	片选1
            01	片选2
            10	片选3
            11	片选4
    
    &lt;P1195&gt;表186说的是访问内存的位宽区别
        当我们选择8位位宽来访问内存,会把地址线的0~25作为地址
        如果选择16位的方式来访问，HADDR[25:1]&gt;&gt;1才是真实地址
        ---------------------------------------------------
        原理:
        我们在访问内存时,内存中有很多字节
        如果按照8位(1字节)来访问内存
                只看后四位
        0x1000--------- 0000
        0x1001--------- 0001
        0x1002--------- 0010
        0x1003--------- 0011
        0x1004--------- 0100
        0x1005--------- 0101
        0x1006--------- 0110
        0x1007--------- 0111
        上面都是每一个字节的地址,如果按照16位(2字节)来访问就应该是
                只看后四位
        0x1000--------- 0000
        0x1002--------- 0010
        0x1004--------- 0100
        0x1006--------- 0110
        0x1008--------- 1000
        0x100A--------- 1010
        以16位方式来访问,最低位肯定是0,所以16位访问方式
        地址线的[25:1]需要 右移 1位
        ---------------------------------------------------
        所以经过上面位宽的选择我们之前分析的
        往这个地址写的是 0x6C000000 命令
        往这个地址写的是 0x6C001000 数据
        有问题
        写命令的没有问题,但是写数据的有问题
        当我们选择16位的方式访问LCD时
        把0x6C001000放到地址线的时候会变成0x6C000800
        硬件会帮我们把[25：1]右移1位,所以就不符合我们的LCD了
        所以我们在选择地址的时候应该选择0x6C002000
        当我们写数据时这个地址右移1位就会变成0x6C001000
        
        命令	0x6C000000
        数据	0x6C002000
    ------------------------------------------
    (100, 100)		0x1234
    1.*(int *)0x6C000000 = 0x1234;
    2.*(int *)0x6C002000 = 100;
    
    把100写到0x1234

    LCD_CMD= 0x1234;
    LCD_DATA = 100;
    ------------------------------------------		
</code></pre>
<h2 id="LCD显示"><a href="#LCD显示" class="headerlink" title="LCD显示"></a>LCD显示</h2><pre><code>    LCD固件
    在LCD上画的任何东西,都是一个点一个点画的(点阵)

    颜色	RGB(通过三原色表示)	YUV(通过分量来表示Y亮度 UV色度)
    我们用的是RGB方式
    RGB888
        一个像素点占24位
        11111111 11111111 11111111	白色
        最红	 最绿	   最蓝
    RGB565
        一个像素点占16位
        11111 111111 11111		白色
        红	绿	蓝
    我们的LCD(9341)用的是RGB565,分辨率是320 * 240
    显存需要320 * 240 * 2(byte)字节
</code></pre>
<p>LCD调节亮度<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/03LCD%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6.png"><br>lcd扫描<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/05lcd%E6%89%AB%E6%8F%8F.png"><br>开发板俯视图<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/06%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BF%AF%E8%A7%86%E5%9B%BE.PNG"><br>cfont文件中显示A<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/cfont%E6%96%87%E4%BB%B6%E4%B8%AD%E6%98%BE%E7%A4%BAA.png"><br>FSMC的配置<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/FSMC%E7%9A%84%E9%85%8D%E7%BD%AE.png"><br>俯视图<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/%E4%BF%AF%E8%A7%86%E5%9B%BE.png"><br>取字模<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/14day/stm32f407zgt6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84LCD/%E5%8F%96%E5%AD%97%E6%A8%A1.png"></p>
<pre><code>    固件分析	lcd.h


<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> shang[<span class="number">128</span>] = &#123;<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xFF</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xE0</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x71</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x1C</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x1F</span>,<span class="number">0x80</span>,<span class="number">0x10</span>,<span class="number">0x01</span>,<span class="number">0x11</span>,<span class="number">0x00</span>,<span class="number">0x1F</span>,<span class="number">0xFF</span>,<span class="number">0x11</span>,<span class="number">0x00</span>,<span class="number">0x1F</span>,<span class="number">0xFF</span>,<span class="number">0x11</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x21</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x21</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x22</span>,<span class="number">0x3F</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x42</span>,<span class="number">0x3D</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0xC2</span>,<span class="number">0x10</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x82</span>,<span class="number">0x00</span>,<span class="number">0x20</span>,<span class="number">0x07</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,<span class="number">0x30</span>,<span class="number">0x03</span>,<span class="number">0x06</span>,<span class="number">0x00</span>,<span class="number">0x1C</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x06</span>,<span class="number">0x00</span>,<span class="number">0x3C</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0xFF</span>,<span class="number">0xF8</span>,<span class="number">0x00</span>,<span class="number">0x07</span>,<span class="number">0xFF</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0x80</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">unsigned</span> <span class="type">char</span> guan[<span class="number">128</span>] = </span><br><span class="line">&#123;<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x44</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x42</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0xC3</span>,<span class="number">0x30</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x81</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x83</span>,<span class="number">0xE0</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0xFE</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x01</span>,<span class="number">0xF0</span>,<span class="number">0x3C</span>,<span class="number">0x20</span>,<span class="number">0x00</span>,<span class="number">0xC0</span>,<span class="number">0x00</span>,<span class="number">0x40</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x40</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x80</span>,<span class="number">0x03</span>,<span class="number">0xFF</span>,<span class="number">0xE1</span>,<span class="number">0x80</span>,<span class="number">0x03</span>,<span class="number">0xFF</span>,<span class="number">0x83</span>,<span class="number">0x00</span>,</span><br><span class="line"><span class="number">0x02</span>,<span class="number">0x00</span>,<span class="number">0x0E</span>,<span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x00</span>,<span class="number">0x3C</span>,<span class="number">0x00</span>,<span class="number">0x02</span>,<span class="number">0x7F</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x04</span>,<span class="number">0x7F</span>,<span class="number">0x1F</span>,<span class="number">0xE0</span>,</span><br><span class="line"><span class="number">0x04</span>,<span class="number">0x00</span>,<span class="number">0x1E</span>,<span class="number">0x70</span>,<span class="number">0x04</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x10</span>,<span class="number">0x06</span>,<span class="number">0x01</span>,<span class="number">0xE0</span>,<span class="number">0x18</span>,<span class="number">0x07</span>,<span class="number">0xFF</span>,<span class="number">0xF0</span>,<span class="number">0x18</span>,</span><br><span class="line"><span class="number">0x03</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x18</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x38</span>,</span><br><span class="line"><span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x70</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x03</span>,<span class="number">0xF0</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>,<span class="number">0x00</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">move</span><span class="params">(参数)</span></span><br><span class="line">&#123;</span><br><span class="line">	圆心坐标 x ,y</span><br><span class="line">	dir = <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">switch</span>(dir)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span> :</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span> :</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span> :</span><br><span class="line">			<span class="keyword">if</span>(y == <span class="number">240</span> - r - <span class="number">1</span>)</span><br><span class="line">				dir = <span class="number">2</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(x == <span class="number">320</span> - r - <span class="number">1</span>)</span><br><span class="line">				dir = <span class="number">4</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				dir = <span class="number">3</span>;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span> :</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">switch</span>(dir)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">1</span> : x--, y--; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">2</span> : x++, y--; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">3</span> : x++, y++; <span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="number">4</span> : x--, y++; <span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	lcd_draw_cir(x, y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_15day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_15day/" class="post-title-link" itemprop="url">stm32_note_15day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 23:30:45" itemprop="dateModified" datetime="2022-09-02T23:30:45+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-9-2<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<pre><code>一.I²C接口设备之SHT30
    1.SHT30传感器的简介
    在我们使用的STM32F103开发板上有两个用来采集温湿度的传感器
    DHT11和SHT30
    DHT11传感器属于入门级别的传感器(做实验时会经常使用的传感器)
    SHT30传感器属于工业级传感器(做产品时会经常使用的传感器)
    2.从官网中查找资料
        1)测量范围 湿度:0%-100%	温度:-40℃ - 125℃
        2)误差范围 湿度:±2%		温度:±0.2℃
        3)通过温度的误差发现
        SHT30传感器,既可以采集到整数数据,也可以采集到小数数据
        4)SHT30传感器是I²C的接口
    3.通过手册了解SHT30
    打开&lt;STM32RBT6\DataSheet\传感器&gt;目录下&lt;sht30_datasheet.pdf&gt;
        1)8管脚的封装形式
        2)SHT30传感器本身是模拟型的传感器,
            内部自带AD转换,可以自行转换
        3)两种设备地址
        ---------------------------------------------
        手册中的描述
        如果ADDR管脚接VSS(接地)	使用的是设备地址A	0x44
        如果ADDR管脚接VDD(接电)	使用的是设备地址B	0x45
        ---------------------------------------------
        分析内容
        设备地址A	0x44	转换成二进制	01000100
        设备地址B	0x45	转换成二进制	01000101
        因为I²C总线规定设备地址是7bit的,最低位是读写标志位
        但是手册中说的设备地址A和设备地址B最低位被占用了
        所以0x44和0x45并不是最终的设备地址
        因为0x44和0x45最低位被占用了,
        用来区分设备地址A和设备地址B的,但是最高位没有被占用
        需要把设备地址A和设备地址B都左移一位
        设备地址A	01000100 &lt;&lt; 1 10001000	0x88
        设备地址B	01000101 &lt;&lt; 1 10001010	0x8A
        所以最终的设备地址是
        设备地址A	0x88
        设备地址B	0x8A
        ---------------------------------------------
        上述的内容将来在很多的嵌入式设备中都会碰到,要多留一个心眼!
        ---------------------------------------------
        4)经过开发板原理图的分析
        ADDR管脚连接了GND,所以我们开发板上的SHT30的设备地址是
        0x88
        5)设置采样频率
        需要发送采样的指令	0x2737
            1&gt;产生开始信号
            2&gt;发送设备地址 + 写的标志(0x88)
            3&gt;等待ACK
            4&gt;发送采样指令的高字节(0x27)
            5&gt;等待ACK
            6&gt;发送采样指令的低字节(0x37)
            7&gt;等待ACK
            8&gt;产生结束信号
        6)发送读取数据的指令
        读取数据的指令	0xE000
            1&gt;产生开始信号
            2&gt;发送设备地址 + 写的标志(0x88)
            3&gt;等待ACK
            4&gt;发送读取数据指令的高字节(0xE0)
            5&gt;等待ACK
            6&gt;发送读取数据指令的低字节(0x00)
            7&gt;等待ACK
        7)读取数据
            1&gt;产生开始信号
            2&gt;发送设备地址 + 读的标志(0x89)
            3&gt;等待ACK
            4&gt;读取温度的高字节数据
            5&gt;产生ACK
            6&gt;读取温度的低字节数据
            7&gt;产生ACK
            8&gt;读取校验字节
            9&gt;产生ACK
            A&gt;读取湿度的高字节数据
            B&gt;产生ACK
            C&gt;读取湿度的低字节数据
            D&gt;产生ACK
            E&gt;读取检验字节
            F&gt;不产生ACK
            G&gt;产生结束信号
        8)读取出的数据不能直接使用,需要转换
        需要把温度的高字节和低字节的数据拼成一个2byte的数据
        需要把湿度的高字节和低字节的数据拼成一个2byte的数据
        代入公式转换
        湿度 = 100 * (double)(2byte湿度数据) / 65535;
        温度 = -45 + 175 * (double)(2byte温度数据) / 65535;
        9)最终结果的显示
        可以通过USART1或者OLED显示出来
==============================
任务
1.和同组的同学串一遍手册分析出的内容
2.搞一个新的项目工程,写SHT30的驱动程序
==============================
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_10day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_10day/" class="post-title-link" itemprop="url">stm32_note_10day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 01:55:27" itemprop="dateModified" datetime="2022-09-02T01:55:27+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-8-26<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    74HC138-&gt;数码管的公共端
        是一个三八译码器,功能是一个选择器
        16管脚的封装形式
        VCC GND
        A0 A1 A2(三个输入)
        E1 E2 E3(控 模式)
        Y0 - Y7(8个输出)
    74HC595-&gt;数码管的数据段
        是一个可以把串行数据转换成并行数据的模块
        16管脚的封装形式
        VCC GND
        DS(串行数据的输入)
        Q0 - Q7(并行数据的输出)
        Q7’级联
        OE(输出使能)
        MR(主复位)
        SH_CP
        ST_CP
        由三个部分组成
        (&lt;8bit移位寄存器&gt;&lt;8bit存储寄存器&gt;&lt;状态输出&gt;)
</code></pre>
<p>选择器			<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/10day/%E9%80%89%E6%8B%A9%E5%99%A8.png"></p>
<pre><code>    派发STM32F407ZGT6开发板
</code></pre>
<h1 id="二-串行的接口"><a href="#二-串行的接口" class="headerlink" title="二.串行的接口"></a>二.串行的接口</h1><pre><code>    1.串口的简介
    串口也叫做串行的接口,串行的通讯接口或者串行的通信接口
    (在Windows系统环境中串口表现为COM接口)
    (在Linux系统环境中串口表现为tty设备&lt;/dev/ttyxx&gt;)
    串行的通信指的是数据一位一位的按顺序(高位先出 | 低位先出)进行传输
    串行的接口操作起来比较简单,只需要一条数据线就可以完成传输数据
    注意 : 并口也叫做并行的接口.指的是数据多位多位进行传输
    并不是说并口可以一次发送多位数据,就要比串口传输速度快,不一定
    2.串口的工作模式
        单工模式		A----&gt;------B
        A设备只发送数据,B设备只接收数据,数据线上只有一种传输方向
        半双工模式	A--&gt;-----&lt;--B
        A设备可以收发数据,B设备也可以收发数据
        但是在同一时间,数据线上只能有一种传输方向
        发送的同时不能接收,接收的同时不能发送
        全双工模式	  ------&gt;-----
                A	    B
                  ------&lt;-----
        A设备可以收发数据,B设备也可以收发数据
        发送的同时可以接收,接收的同时可以发送
    3.不同电平标准的串口
    注意 : 如果两个设备需要通过串口进行通信,首先要确保电平标准一致
    如果电平标准不一致,需要使用电平转换模块
        TTL电平标准的串口
            0V代表数据0	3.3V/5V代表数据1
            传输距离差不多1米左右
        RS232电平标准的串口
            (3V - 12V)代表数据0	(-3V - -12V)代表数据1
            传输距离差不多15米左右
        RS485电平标准的串口(工业级的总线&lt;抗干扰性极强&gt;)
            在单工模式或者半双工模式下最少需要两条数据线
            在全双工模式下需要四条数据线
            因为传输的是两条电线的电压差
            传输距离差不多1000米左右
    4.我们开发板上串口的分类
    在STM32F103RBT6芯片中串口的分类
    SPI、I²C、I²S、USART/UART、CEC、USB、CAN、以太网接口、SDIO
    本次主要讲的是USART/UART
    5.USART/UART
    USART : 通用的同步异步收发器
        既支持同步模式也支持异步模式
    UART   : 通用的异步收发器
        只支持异步模式
    6.同步和异步
    同步 : 发送方发出数据之后,需要等待接收方回复应答,接收到应答之后再发送
        下一个数据包
        同步是阻塞模式
    比如说 : I²C、SPI属于同步的通信
    异步 : 发送方发出数据之后,不需要等待接收方回复应答,直接发送下一个数据包
        异步是非阻塞模式
    比如说 : UART属于异步的通信

    7.我们开发板上的USART/UART
    我们使用的STM32F103RBT6芯片中一共有3个USART/UART
    USART1	纽扣电池的上面
    USART2	无线模块的接口位置
    USART3	扩展IO
    目的 : 带着大家把USART1的实验完成,自己搞定USART2/USART3的驱动
    
    8.驱动USART1
    USART1_TX	PA9	推挽复用
    USART1_RX	PA10	浮空输入

    在通讯之前需要规定好双方的波特率
    115200 8N1
    115200	波特率
    8	8个数据位(1个字节数据)
    N	没有奇偶校验
    1	1个停止位
注意 : 上位机程序(串口调试助手)不要打开多个！！！

=================================
作业
1.把本周讲过的内容完整的复习一遍
2.举一反三(根据驱动USART1的程序把USART3搞定)
3.封装函数
    extern void usart_1_send_data(char *buf);//可以发送多个字节数据
4.通过USART1显示DHT11采集的数据
    &quot;HUM:XX TEMP:XX&quot;
5.通过USART1把结构体类型的数据发送出去
    struct data
    &#123;
        float Hum;//湿度
        float Temp;//温度
        int pm_value;//PM2.5
        char buf[16];//存储额外的数据
    &#125;;
    struct data d = &#123;23.45, 34.56, 9527, &quot;Hello World&quot;&#125;;
=================================
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_11day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_11day/" class="post-title-link" itemprop="url">stm32_note_11day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 01:55:32" itemprop="dateModified" datetime="2022-09-02T01:55:32+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.9k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>4 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-8-29<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    串口
    1.以串行的方式(数据按照顺序&lt;高位先出|低位先出&gt;一位一位的进行传输)
    传输数据
    2.串口的工作模式(单工模式 半双工模式 全双工模式 )
    3.不同电平标准的串口(TTL、RS232、RS485)
    4.在STM32F103RBT6芯片中,串口外设
    (IIC、SPI、USART/UART、USB、CAN)
    5.研究USART/UART
    USART:通用的同步异步收发器
    UART:通用的异步收发器
    在STM32F103RBT6芯片中有3个USART/UART
    在开发板上的位置
        USART1	纽扣电池的上面
        USART2	无线模块的接口
        USART3	扩展IO上
    6.驱动USART1
    void usart_1_init(void)
    &#123;
        1)通过APB2总线使能GPIOA组和USART1的时钟
        2)初始化GPIOA组的管脚
            1&gt;把PA9管脚配置为推挽的复用模式
            2&gt;把PA10管脚配置为浮空的输入模式
        3)初始化USART1
            1&gt;选择115200的波特率
            2&gt;关闭硬件流控
            3&gt;选择发送和接收模式
            4&gt;选择没有奇偶校验
            5&gt;选择8个数据位
            6&gt;选择1个停止位
        4)初始化NVIC
            1&gt;配置组优先级和子优先级的所占比例
            2&gt;初始化NVIC
                选择USART1的中断号
                使能该中断
                选择组优先级的级别
                选择子优先级的级别
        5)选择由USART1的接收触发中断
        6)使能USART1的功能
    &#125;
    void usart_1_send_byte(u8 data)
    &#123;
        1)把形参数据通过官方固件进行发送
        2)以死等的方式等待USART1的数据发送成功
        3)清除USART1等待发送成功的标志状态
    &#125;
    u8 usart_1_recv_byte(void)
    &#123;
        1)判断USART1是否接收到了数据
        2)接收数据
        3)清除USART1接收到数据的标志状态
        4)把接收到的数据返回
    &#125;

3.封装函数
    extern void usart_1_send_data(char *buf);//可以发送多个字节数据
4.通过USART1显示DHT11采集的数据(自己找张纸写一下itoa函数的实现)
    &quot;HUM:XX TEMP:XX&quot;
5.通过USART1把结构体类型的数据发送出去
    struct data
    &#123;
        float Hum;//湿度
        float Temp;//温度
        int pm_value;//PM2.5
        char buf[16];//存储额外的数据
    &#125;;
    struct data d = &#123;23.45, 34.56, 9527, &quot;Hello World&quot;&#125;;
</code></pre>
<h1 id="二-串口附加的内容"><a href="#二-串口附加的内容" class="headerlink" title="二.串口附加的内容"></a>二.串口附加的内容</h1><pre><code>    int a = 100;
    printf(&quot;a = %d\n&quot;, a);
    printf(&quot;%d-%c-%s-%f\n&quot;, 9527, &#39;A&#39;, &quot;Hello&quot;, 3.14);
    int printf(const void *format, ...)//不定参的函数
    &#123;
        int i = 0;

        for(i = 0; format[i] != &#39;\0&#39;; i++)
        &#123;
            if(format[i] == &#39;%&#39;)
            &#123;
                i++;
                switch(format[i])
                &#123;
                    case &#39;d&#39; : 
                    case &#39;c&#39; :
                    case &#39;s&#39; :
                    case &#39;f&#39; :
                &#125;
            &#125;
            else
            &#123;
                fgetc();
            &#125;
        &#125;
    &#125;


    1.标准库中没有实现itoa函数,但是有sprintf函数
    printf一族的函数
    printf-&gt;把双引号的内容打印输出到标准输出中
    sprintf-&gt;把双引号的内容打印输出到字符数组中
    fprintf-&gt;把双引号的内容打印输出到文件中
    如果在默认环境中直接使用printf或者scanf函数,单片机的程序会直接跑飞
    因为printf和scanf函数它的操作对象是标准输入和标准输出,
    是有操作系统的环境下,但是单片机是裸板,没有操作系统
    2.如果想要在STM32环境中使用printf和scanf函数,需要做一些特殊处理
    需要把printf函数和scanf函数重定向到串口的发送和串口的接收
    推荐两种方法
        1)使用微库(Micro Lib)
        可以使用微库来替代C语言的标准库,
        微库主要是给容量比较小的芯片进行使用的,
        但是如果芯片本身容量够用不建议使用微库,
        因为微库实现的函数相较于C语言标准库来说不完整,
        而且在使用一些大型功能的函数的时候,
        微库的效率要比C语言标准库低
            1&gt;开启微库
            第三行菜单栏-&gt;Options for target-&gt;target菜单中-&gt;
            在右边栏中-&gt;选中USE Micro LIB
            2&gt;把printf和scanf函数的实现重定向到
            USART1的发送和接收,
            把fgetc和fputc函数的功能重定向到
            USART1的发送和接收
            int fgetc(FILE *f);
            int fputc(int c, FILE *f);
        2)禁用半主机模式
        半主机模式是由ARM核心提供的一种机制
        主要是因为ARM核心在研发的时候,ARM公司并不确定将来会和
        哪家半导体厂商合作,也不确定将来半导体厂商会在芯片上连接
        什么样的输入设备和输出设备
        所以,ARM公司在研发核心的时候会启用一种半主机模式
        ARM平台会通过仿真器/调制器可以把ARM核心中的输入输出
        重定向到X86平台
        现在我们需要把输入输出重定向到USART1的发送和接收上
        所以需要禁用半主机模式
    
</code></pre>
<h1 id="三-引出后续内容"><a href="#三-引出后续内容" class="headerlink" title="三.引出后续内容"></a>三.引出后续内容</h1><pre><code>    1.完成了发送字符和发送字符串的函数
        将来操作无线模块可以发送AT指令
        AT指令是由&#39;A&#39;和&#39;T&#39;组成的字符串
        SSID是路由器的名称,password是路由器的密码
        AT+CWJAP=&quot;SSID&quot;,&quot;password&quot;
        &quot;AT+CWJAP=&quot;Easthome&quot;,&quot;123456&quot;\r\n&quot;
    usart_2_send_data(&quot;AT+CWJAP=&quot;Easthome&quot;,&quot;123456&quot;\r\n&quot;);

    usart_2_send_data(&quot;AT+CWJAP=&quot;);
    usart_2_send_byte(&#39;&quot;&#39;);
    usart_2_send_data(&quot;Easthome&quot;);
    usart_2_send_byte(&#39;&quot;&#39;);
    usart_2_send_byte(&#39;,&#39;);
    usart_2_send_byte(&#39;&quot;&#39;);
    usart_2_send_data(&quot;123456&quot;);
    usart_2_send_byte(&#39;&quot;&#39;);
    usart_2_send_data(&quot;\r\n&quot;);
===========================================
作业
    1.复习
    2.模拟工业物联网控制台指令收发器
    在串口调试助手中发送&quot;L0_ON&quot;,开发板接收到之后点亮LED0
    在串口调试助手中发送&quot;L1_ON&quot;,开发板接收到之后点亮LED1
    在串口调试助手中发送&quot;L2_ON&quot;,开发板接收到之后点亮LED2
    在串口调试助手中发送&quot;BE_ON&quot;,开发板接收到之后打开蜂鸣器
    在串口调试助手中发送&quot;L0_OFF&quot;,开发板接收到之后关闭LED0
    在串口调试助手中发送&quot;L1_OFF&quot;,开发板接收到之后关闭LED1
    在串口调试助手中发送&quot;L2_OFF&quot;,开发板接收到之后关闭LED2
    在串口调试助手中发送&quot;BE_OFF&quot;,开发板接收到之后关闭蜂鸣器
    3.模拟ESP8266内部的AT指令操作
    接收一个字符串-&gt;驱动WiFi(内部支持AT指令)
        在串口调试助手中发送&quot;+IPD,10:0123456789&quot;
    +IPD,XX:YYYYYYYYYY
    X部分是接收到的数据的字节数
    Y部分是真正的数据
    4.根据开发板原理图找到USART3的管脚,和组内成员测试
===========================================
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_12day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_12day/" class="post-title-link" itemprop="url">stm32_note_12day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 01:55:40" itemprop="dateModified" datetime="2022-09-02T01:55:40+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-8-30<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    USART1的驱动
    初始化
    发送数据
        发送一个字节数据
        发送多个字节数据
            通过遍历有效数据
            把数据按照一个字节一个字节的方式进行发送
        printf进行重定向(重定向到USART1的发送)
            使用微库
            禁用半主机模式
            以上两种方法都需要重新实现fgetc以及fputc函数
    接收数据
        轮询接收数据
        中断接收数据
            使用有限状态机的方法解析字符串数据

    &quot;+IPD,XX:YYYYYYY&quot;
    XX指的是接收到数据的字节数
    YY指的是真实数据
    &quot;+IPD,12:abcdefghijkl&quot;

#define A_FLAG 0
#define I_FLAG 1
#define P_FLAG 2
#define D_FLAG 3
#define H_FLAG 4
#define M_FLAG 5
#define S_FLAG 6
int flag = A_FLAG;
char bytes[4] = &#123;0&#125;;//存储数据的字节数(字符串版本)
int i = 0;//循环变量
int length = 0;//存储数据的字节数(整数版本)
char data[128] = &#123;0&#125;;//存储数据

void recv_handler(u8 c)
&#123;
    switch(flag)
    &#123;
        case A_FLAG : 	if(c == &#39;+&#39;)
                    flag = I_FLAG;
                break;
        case I_FLAG :	if(c == &#39;I&#39;)
                    flag = P_FLAG;
                else
                    flag = A_FLAG;
                break;
        case P_FLAG :	if(c == &#39;P&#39;)
                    flag = D_FLAG;
                else
                    flag = A_FLAG;
                break;
        case D_FLAG:	if(c == &#39;D&#39;)
                    flag = H_FLAG;
                else
                    flag = A_FLAG;
                break;
        case H_FLAG :	if(c == &#39;,&#39;)
                    flag = M_FLAG;
                else
                    flag = A_FLAG;
                break;
        case M_FLAG :	if(c == &#39;:&#39;)
                    flag = S_FLAG;
                else
                    bytes[i++] = c;
                break;
        case S_FLAG :	length = atoi(bytes);
                while(length--)
                    data[] = c;
    &#125;
&#125;
</code></pre>
<h1 id="二-串口之I²C"><a href="#二-串口之I²C" class="headerlink" title="二.串口之I²C"></a>二.串口之I²C</h1><pre><code>    1.I²C的简介
    IIC也称为I2C或者I²C(专业的写法就是I²C),属于串行总线中的一种,
    也是数据按顺序一位一位进行发送
    I²C必须要有两条线(一条是数据线&lt;SDA&gt;、一条是时钟线&lt;SCL&gt;),是半双工的工作模式		
    2.I²C与USART的对比
    USART : 通用的同步异步收发器
    两条数据线(一条是发送、一条是接收)
    属于全双工的工作模式
    由于没有时钟线,所以设备通过USART通信之前需要规定好双方的波特率

    I²C : 集成电路总线
    两条线(一条是数据线&lt;SDA&gt;、一条是时钟线&lt;SCL&gt;)	
    属于半双工的工作模式
    由于有时钟线,可以自行调节读写速率,所以不需要规定双方的比特率

    3.I²C总线协议的目的
    需要驱动开发板上的OLED屏幕、EEPROM、SHT30
    1)需要带着大家把EEPROM的外设驱动起来
    2)需要带着大家把OLED的驱动移植成功
    3)自己想办法驱动SHT30
    
    4.通过官方手册了解I²C的协议
    打开&lt;STM32RBT6\DataSheet\其他&gt;目录下&lt;IIC.pdf&gt;P7 - P14中的图
    1)I²C总线需要两条线(SDA/SCL),在I²C总线上可以连接很多的设备,
        设备与设备之间是串联的关系
    2)凡是连接到I²C总线上的设备都需要有一个设备地址
        注意:一般来说设备地址是7bit的
    --------------------------------------------------------------------------
    面试题
    1.I²C总线理论上可以连接多少个设备?	理论上128个设备(设备地址)
    --------------------------------------------------------------------------
    3)I²C总线进行通信时会分为主设备和从设备
        主设备是主动的,从设备是被动的
        I²C总线本身非常公平,任何连接到I²C总线上的设备都既可以做主也可以做从
        (注意:有些设备由于本身的原因只能做从设备做不了主设备)
        如果两个设备同时都想要通信,会触发抢主的机制
        抢到主的设备优先通信,没抢到主的设备等待通信完成之后,再重新抢主
        (注意:抢主的机制,就是谁先产生开始信号,谁就优先通信)
    4)I²C总线在空闲状态时,SDA和SCL要呈现高电平的状态(需要外接上拉电阻)
    5)开始信号和结束信号
        开始信号 : 在SCL为高电平的时候,SDA由高电平拉到低电平
        结束信号 : 在SCL为高电平的时候,SDA由低电平拉到高电平
    6)传输数据
        1&gt;在SCL为低电平的时候,把数据放到SDA数据线上
        2&gt;拉高SCL,当SCL为高电平的时候,SDA的电平要保持不变
        3&gt;拉低SCL,在SCL为低电平的时候,切换下一位数据放到SDA数据线上
    7)I²C总线是高位先出
    8)I²C总线在传输一个字节数据时需要9个周期
        9个周期 = 8个数据周期 + 1个ACK(应答)周期
    9)I²C总线属于停等式的流控,每发送完一个字节数据都需要有一个ACK应答
    A)产生应答 : 在SCL的第9个周期,SCL拉低,从设备拉低SDA,拉高SCL.延时一段时间
        把SCL拉低,从设备拉高SDA
    B)读取应答 : 在SCL的第9个周期,在SCL为高电平时读取SDA的电平
        如果读取到了高电平代表没有ACK,如果读取到了低电平代表有ACK
    C)I²C总线产生开始信号之后,
        发送的第一个字节内容是 = 7bit设备地址 + 1bit读写标志位
    D)主设备发送数据给从设备
        1&gt;主设备产生开始信号
        2&gt;主设备发送从设备的设备地址 + 写的标志(0)
        3&gt;主设备等待ACK
        4&gt;主设备发送一个字节数据
        5&gt;主设备等待ACK
        ...
        n&gt;主设备发送最后一个字节数据
        n+1&gt;主设备可以等待ACK或者不等待ACK
        n+2&gt;主设备产生结束信号
    E)主设备读取从设备发送的数据
        1&gt;主设备产生开始信号
        2&gt;主设备发送从设备的设备地址 + 读的标志(1)
        3&gt;主设备等待ACK
        4&gt;主设备等待接收一个字节数据
        5&gt;主设备产生ACK
        ...
        n&gt;主设备等待接收最后一个字节数据
        n+1&gt;主设备不需要产生ACK
        n+2&gt;主设备产生结束信号
</code></pre>
<p>IIC<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/01.IIC.png"></p>
<p>02.IIC硬件连接<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/02.IIC%E7%A1%AC%E4%BB%B6%E8%BF%9E%E6%8E%A5.png"></p>
<p>03.IIC协议要求<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/03.IIC%E5%8D%8F%E8%AE%AE%E8%A6%81%E6%B1%82.png"></p>
<p>04.IIC协议(开始信号结束信号)<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/04.IIC%E5%8D%8F%E8%AE%AE(%E5%BC%80%E5%A7%8B%E4%BF%A1%E5%8F%B7%E7%BB%93%E6%9D%9F%E4%BF%A1%E5%8F%B7).png"></p>
<p>05.IIC协议_详细<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/05.IIC%E5%8D%8F%E8%AE%AE_%E8%AF%A6%E7%BB%86.png"></p>
<p>06.IIC协议_ACK产生<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/06.IIC%E5%8D%8F%E8%AE%AE_ACK%E4%BA%A7%E7%94%9F.png"></p>
<p>07.IIC_主的编程<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/07.IIC_%E4%B8%BB%E7%9A%84%E7%BC%96%E7%A8%8B.png"></p>
<p>开发板上的IIC设备<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E7%9A%84IIC%E8%AE%BE%E5%A4%87.png"></p>
<p>学生发的笔试题<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/12day/%E5%AD%A6%E7%94%9F%E5%8F%91%E7%9A%84%E7%AC%94%E8%AF%95%E9%A2%98.jpg"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_08day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_08day/" class="post-title-link" itemprop="url">stm32_note_08day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 01:55:18" itemprop="dateModified" datetime="2022-09-02T01:55:18+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-8-24<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    其他的定时器主要讲的是看门狗
    1.通过最新选型手册了解-&gt;有两个看门狗外设资源-&gt;属于定时器外设
    2.看门狗使用的环境
    3.喂狗的操作
    4.独立看门狗和窗口看门狗的区别
    5.独立看门狗
    IWDG_KR(键寄存器)	&lt;接收特定的值,执行特定的操作&gt;
    0x5555	开启(IWDG_PR和IWDG_RLR寄存器)写访问(关闭写保护)
    0xCCCC	开启看门狗
    0xAAAA	喂狗的操作
    IWDG_PR(预分频值寄存器) &lt;用来给时钟频率分频的&gt;
    000 4分频		100 64分频
    001 8分频		101 128分频
    010 16分频	110 256分频
    011 32分频	111 245分频
    IWDG_RLR(重装载值寄存器) &lt;用来保存计数值的&gt;
    计数值范围[12个0 - 12个1]&lt;0 - 4095&gt;
    
    传感器
    市面上比较常见的传感器
    传感器的接口
    通过DHT11的手册分析DHT11传感器
    1.温湿度的传感器
    2.4管脚的封装形式
        1PIN	VCC
        2PIN	DATA
        3PIN	NC
        4PIN	GND
    3.测量范围 : 湿度20 - 90%  温度0 - 50℃
    4.误差范围 : 湿度±5%         温度±2℃
    5.分辨力1 : 只能采集到整数的数据,采集不了小数数据
    6.串行接口(单线双向)
        串行接口 : 以串行的方式传输数据,数据按照顺序一位一位发送
        单线双向 : 半双工的工作模式
    7.高位先出
    8.一次完整的数据需要40bit = 8bit湿度的整数数据 + 8bit湿度的小数数据
            + 8bit温度的整数数据 + 8bit温度的小数数据
            + 8bit校验和
    9.分析读写时序
    10.串行接口发送数据接收数据(高位先出、低位先出)
</code></pre>
<h1 id="二-驱动DHT11"><a href="#二-驱动DHT11" class="headerlink" title="二.驱动DHT11"></a>二.驱动DHT11</h1><h1 id="三-DS18B20"><a href="#三-DS18B20" class="headerlink" title="三.DS18B20"></a>三.DS18B20</h1><pre><code>    专门用来检测温度的传感器
    打开&lt;STM32RBT6\DataSheet\传感器&gt;目录下&lt;DS18B20.pdf&gt;
    1.DS18B20是3管脚的封装形式(VCC DQ GND)
    2.DS18B20是一线传输的传感器(只有一条数据线&lt;既需要输入也需要输出&gt;)
    3.电压范围		3.0V - 5.5V
    4.测量范围		-55℃ - +125℃
    5.误差范围(在-10℃ - +85℃)会有±0.5℃的误差
    6.DS18B20既可以采集到整数数据也可以采集到小数数据
    7.DS18B20采集到的数据会存放在9bit - 12bit的存储空间中
    8.转换12bit的温度数据最多需要消耗750ms
    9.在DS18B20传感器内部有9个字节的暂存器
        第0个字节		温度的低字节数据
        第1个字节		温度的高字节数据
        第2个字节		温度的上限
        第3个字节		温度的下限
        第4个字节		配置
        第5 6 7字节	保留
        第8个字节		校验
    A.通过配置暂存器的第4个字节(配置)来选择采集温度数据所占位数
        0 R1 R0 1 1 1 1 1
        第0-4位		都是1
        通过R1 R0选择温度所占位数
        0 0		9bit
        0 1		10bit
        1 0		11bit
        1 1		12bit
        第7位		是0
    B.用来存储温度的暂存器
        温度的高字节的高5位是符号位(0代表正	1代表负)
        DS18B20的分辨力是0.0625℃
        DS18B20的暂存器存储的也是补码数据
        所以将来从DS18B20的暂存器中读出的数据是补码
    -0.5°C
    原码	11111000 00001000
    补码	11111111 11111000
    注意 : 读取数据有一个特殊值
    假如将来读到的数据是
        11111111 00000000
    补码	11111111 00000000
    原码	11111001 00000000
    因为高字节和低字节的数据都要+1
        低字节的+1 : 补码转换成原码时候的+1
        高字节的+1 : 是因为产生了进位所以要+1
    C.DS18B20内部支持很多的指令
    D.手册中给驱动工程师写了案例
    E.分析DS18B20的时序图
</code></pre>
<h1 id="四-数码管"><a href="#四-数码管" class="headerlink" title="四.数码管"></a>四.数码管</h1><pre><code>    1.显示类的设备
    LCD显示屏、OLED屏幕、段码屏(需要厂家定制)、点阵屏、光立方、数码管
    作用就是用来显示数据的
    其中数码管可以显示数字0 - 9包括一些简单的英文字母
    2.数码管
    常见的数码管有七段数码管或者八段数码管
    其中每一个段就相当于是一个LED灯
    八段数码管要比七段数码管多一个用于显示小数的小数点
    3.共阴极数码管和共阳极数码管
    共阴极数码管 : 数码管中所有数据段的阴极都连接到了一起,接地
            给数据段的阳极输出高电平,可以点亮数码管
    共阳极数码管 : 数码管中所有数据段的阳极都连接到了一起,接电源
            给数据段的阴极输出低电平,可以点亮数码管
    各自的编码 : 
    共阳极数码管的编码
    uchar code table[]=&#123;0xc0,0xf9,0xa4,0xb0,//0 1 2 3
            0x99,0x92,0x82,0xf8,//4 5 6 7
            0x80,0x90,0x88,0x83,//8 9 A B
            0xc6,0xa1,0x86,0x8e&#125;;//C D E F
    共阴极数码管的编码：
    uchar code table[]=&#123;0x3f,0x06,0x5b,0x4f,//0 1 2 3
            0x66,0x6d,0x7d,0x07,//4 5 6 7
            0x7f,0x6f,0x77,0x7c,//8 9 A B
            0x39,0x5e,0x79,0x71&#125;;//C D E F
    4.四位共阴极数码管
    我们的开发板上连接的是四位共阴极的数码管
    产生的问题
    如果四位数码管的所有数据段都连接到芯片的管脚上就会占用32个管脚
    这样对于芯片的管脚太浪费了
    ------------------------------------------------------------------------
    为了解决芯片管脚浪费的问题
    把四位数码管的所有的A段都连接到了一起
    把四位数码管的所有的B段都连接到了一起
    ...
    把四位数码管的所有的DP段都连接到了一起
    这样处理只会消耗芯片的8个管脚
    产生的问题
    给8个数据段写入编码,四个数码管会显示相同的数据
    ------------------------------------------------------------------------
    四位数码管的公共端接到芯片的管脚上
    将来想要让某个数码管显示数据,就让该数码管的公共端有效,
    其他数码管的公共端无效即可
    产生的问题
    四位数码管不能同时显示数据(只能一个一个显示)
    ------------------------------------------------------------------------
    可以利用人类眼睛的视觉暂留处理

=============================
作业
1.把今天讲过的内容完完整整的复习一遍
=============================
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_09day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_09day/" class="post-title-link" itemprop="url">stm32_note_09day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 01:55:23" itemprop="dateModified" datetime="2022-09-02T01:55:23+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-8-25<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    1.根据分析的DHT11的读写时序来写DHT11传感器的驱动
    2.分析DS18B20传感器的内容
        1)三管脚的封装形式(VCC DQ GND)
        2)一线传输(以串行的方式传输数据)&lt;半双工的工作模式&gt;
        3)工作电压范围	3.0V - 5.5V
        4)测量范围	-55℃ - +125℃
        5)误差范围(在-10℃ - 85℃)会有±0.5℃的误差
        6)可以采集到整数的数据和小数的数据
        7)在DS18B20的内部会有9个字节的暂存器
        第0个字节		温度的低字节数据
        第1个字节		温度的高字节数据
            高字节的高5位是符号位
            存储的是温度的补码数据
        第2个字节		温度的上限
        第3个字节		温度的下限
        第4个字节		配置
            是用来配置DS18B20采集温度所占位数
            0 R1 R0 1 1 1 1 1
            00	9bit的温度数据
            01	10bit的温度数据
            10	11bit的温度数据
            11	12bit的温度数据
        第5 6 7字节	保留
        第8个字节		检验
        8)在DS18B20传感器中支持很多的指令
        9)DS18B20官方手册给了发送指令的案例
        A)分析DS18B20的读写时序
</code></pre>
<h1 id="二-数码管"><a href="#二-数码管" class="headerlink" title="二.数码管"></a>二.数码管</h1><pre><code>    我们的开发板上使用的四位共阴极的数码管
    1.显示类的设备
    市面上的显示类型的设备有很多种
    LCD、OLED、数码管、段码屏、点阵屏、光立方...
    2.数码管
    数码管可以分为七段数码管和八段数码管
    八段数码管要比七段数码管多一个用于显示小数的小数点
    数码管中的每一个段就相当于是一个LED灯
    3.共阴极数码管和共阳极数码管
    共阴极数码管 : 数码管上所有的LED灯的阴极都连接到了一起,接地
    共阳极数码管 : 数码管上所有的LED灯的阳极都连接到了一起,接电源
    共阴极数码管的编码和共阳极数码管的编码正好相反
    共阳极数码管的编码 :
    uchar code table[]=&#123;0xc0,0xf9,0xa4,0xb0,//0 1 2 3
            0x99,0x92,0x82,0xf8,//4 5 6 7
            0x80,0x90,0x88,0x83,//8 9 A B
            0xc6,0xa1,0x86,0x8e&#125;;//C D E F
    共阴极数码管的编码 :
    uchar code table[]=&#123;0x3f,0x06,0x5b,0x4f,//0 1 2 3
            0x66,0x6d,0x7d,0x07,//4 5 6 7
            0x7f,0x6f,0x77,0x7c,//8 9 A B
            0x39,0x5e,0x79,0x71&#125;;//C D E F
    如何获取数码管的编码
    1)可以百度查找
    2)可以通过转换软件直接转换
    4.四位数码管
    四位数码管可以分别显示千位 百位 十位 个位
    已知一个数码管有8个LED灯需要8个数据段
    四位数码管有32个LED灯需要32个数据段
    如果直接连接到芯片的管脚上需要消耗芯片的32个管脚
    这样的方式对于芯片的管脚来说太浪费了
    5.四位数码管的问题
</code></pre>
<p>原理图<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/09day/7_%E5%8E%9F%E7%90%86%E5%9B%BE.png"></p>
<pre><code>        1)芯片管脚的浪费
        把所有数码管的A段都连接到一起
        把所有数码管的B段都连接到一起
        ...
        把所有数码管的DP段都连接到一起
        2)相同数据段都连接到了一起
        给四位数码管一个数据编码,这4个数码管会显示相同的数据
        3)把四位数码管的4个公共端也都连接到GPIO的管脚上
        将来想要让某个数码管显示数据,就让给数码管的公共端输出低电平
        其他数码管输出高电平
        4)经过2) 3)的处理产生了一个问题,
            四位数码管不能同时显示不同的数据
        利用人眼睛的视觉暂留
    6.分析开发板原理图
        开发板上的四位共阴极的数码管
        公共端连接到了74HC138模块上
        数据段连接到了74HC595模块上
        如果想要驱动数码管,首先需要驱动74HC138和74HC595
    7.分析74HC138
</code></pre>
<p>74HC138<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/09day/5_74HC138.png"></p>
<pre><code>        74HC138是一个典型的三八译码器(是作为一个选择器来使用的)
        三个输入,八个输出(给一定的输入就会用相应的输出)
    打开&lt;STM32RBT6\DataSheet\其他&gt;目录下&lt;74HC138.pdf&gt;
        P3	封装形式(了解管脚功能)
        P4	真值表
        查看开发板原理图
        
    8.
</code></pre>
<p>74HC595<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/09day/6_74HC595.png"></p>
<pre><code>        74HC595是一个可以把串行数据转换成并行数据的模块
    打开&lt;STM32RBT6\DataSheet\其他&gt;目录下&lt;74HC595.pdf&gt;
        P4	封装形式(了解管脚功能)
        P5	工作原理分析
        
    9.根据开发板原理图把需要操作的管脚找到
    HC138_A0	PC11	74HC138中的控制	推挽输出
    HC138_A1	PC12	74HC138中的控制	推挽输出
    HC138_A2	PD2	74HC138中的控制	推挽输出
    HC595_SCLK	PB5	移位寄存器的时钟	推挽输出
    HC595_LCLK	PB4	存储寄存器的时钟	推挽输出
    HC595_DATA	PB3	把串行数据存储到	推挽输出
                移位寄存器中

==============================
任务
1.把9527显示到数码管上
2.把DHT11采集的温湿度的数据显示到数码管上
==============================
作业
1.把今天讲过的内容完整的复习一遍
2.把开发板作为记秒表的设备
    KEY0	开始记秒表
    KEY1	暂停
    KEY2	清零
    00.00
    秒数.
==============================
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://naoemb.cf/2023/02/16/embsky/STM32/stm32_03day/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
      <meta itemprop="name" content="naoemb">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="naoemb">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/02/16/embsky/STM32/stm32_03day/" class="post-title-link" itemprop="url">stm32_note_03day</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-02-16 08:03:05" itemprop="dateCreated datePublished" datetime="2023-02-16T08:03:05+08:00">2023-02-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-09-02 01:54:53" itemprop="dateModified" datetime="2022-09-02T01:54:53+08:00">2022-09-02</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.3k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;<br>2022-8-17<br>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<h1 id="一-温故知新"><a href="#一-温故知新" class="headerlink" title="一.温故知新"></a>一.温故知新</h1><pre><code>    从表象到里象的方式去了解设备
    1.从外观入手
        开发板上外接了哪些模块、使用芯片的型号
    2.画图了解芯片内部结构
        CPU + 内存 + 硬盘 + 外设
    3.介绍了ARM公司和ST公司
        ARM-CORTEX-A	针对高端应用(手机 平板电脑 安卓电视)
        ARM-CORTEX-R	针对实时操作系统(军工、航天、医疗)
        ARM-CORTEX-M	针对工控领域(智能终端设备)	
    4.通过手册了解芯片
        最新选型手册 : 外设数量、存储大小、封装形式
    5.开发方式
    6.搭建模板项目工程
</code></pre>
<h1 id="二-通过硬件的手册了解芯片内部的结构"><a href="#二-通过硬件的手册了解芯片内部的结构" class="headerlink" title="二.通过硬件的手册了解芯片内部的结构"></a>二.通过硬件的手册了解芯片内部的结构</h1><pre><code>    打开&lt;STM32RBT6\DataSheet\STM32&gt;目录下&lt;STM32F103RB.pdf&gt;
    P19	芯片内部的结构
    
    1.STGM32F103RBT6芯片使用的CPU是ARM-CORTEX-M3主频是72MHz
    2.CPU是通过三总线来访问外设的
    3.三总线包括 : 数据总线(传输数据) 地址总线(传输地址) 控制总线(控制读写)
    --------------------------------------------------------
    例子 :
    在某工程中,要求给地址为0xaa55的空间复制一个整型的数据,
    数据为0x55aa
    0xaa55 = 0x55aa;.//不可以,因为左值是一个常量
    *(volatile unsigned int *)(0xaa55) = 0x55aa;
    --------------------------------------------------------
    4.在STM32芯片中AHB AHB1 AHB2都是三总线,叫做高速总线
        APB1 APB2也是三总线,叫做外设总线
    5.GPIO的管脚是从0开始计数的
        GPIOxy
        [x = A B C D]
        [y = 0 1 2 ... 15]
    6.大部分的外设都是连接到了外设总线上,所以当某个外设工作时
    需要先通过相应的外设总线打开外设的时钟,该外设才能工作
    
    P23	芯片的管脚
    GPIOA	[0 - 15]
    GPIOB	[0 - 15]
    GPIOC	[0 - 15]
    GPIOD	[0 1 2]

    P26	芯片管脚的复用
    芯片的管脚是多功能复用型的管脚
        输入功能
            上拉输入
            下拉输入
            浮空输入
        输出功能
            推挽输出
            开漏输出
        复用功能
            推挽复用
            开漏复用
        模拟功能
            模拟输入
</code></pre>
<h1 id="三-GPIO外设之输出功能"><a href="#三-GPIO外设之输出功能" class="headerlink" title="三.GPIO外设之输出功能"></a>三.GPIO外设之输出功能</h1><pre><code>    输入功能相当于是检测,输出功能相当于是控制
    输出功能分为推挽输出和开漏(漏级)输出
    推挽输出 : 管脚既可以输出高电平,也可以输出低电平
    开漏输出 : 管脚只能输出低电平,输出不了高电平
    LED-&gt;PC9管脚
    如果PC9管脚输出高电平,LED灯灭
    如果PC9管脚输出低电平,LED灯亮
</code></pre>
<p>01LED灯<br><img src="/images/2022-8-15_STM32/2022-8-15_STM32/note/03day/01LED%E7%81%AF.png"></p>
<pre><code>    问题 : 芯片的管脚是多功能复用型的管脚,如何给管脚选择输出功能?
    答 : 可以通过操作GPIO外设的寄存器来选择输出的功能
    问题 : GPIO都有哪些寄存器?
    答 : 可以通过查询芯片的手册了解GPIO的寄存器以及操作方式
打开&lt;STM32RBT6\DataSheet\STM32&gt;目录下&lt;STM32F10x中文参考手册.pdf&gt;
寄存器的真实地址 = 基地址 + 偏移地址
例如 : 
GPIOC_CRL的真实地址 = GPIOC组的基地址 + CRL寄存器的偏移地址
        = 0x40011000 + 0x00
因为需要操作PC9管脚，所以需要使用端口配置高寄存器
GPIOC_CRH的真实地址 = GPIOC组的基地址 + CRH寄存器的偏移地址
        = 0x40011000 + 0x04
#define GPIOC_CRH *(volatile unsigned int *)(0x40011000 + 0x04)
GPIOC_CRH |= (3 &lt;&lt; 4);//把PC9管脚配置为输出功能并且为50MHz的输出速率
-----------------------------------------------------------------------------
3		00000000 00000000 00000000 00000011
3&lt;&lt;4		00000000 00000000 00000000 00110000
    |
GPIOC_CRH	xxxxxxxx xxxxxxxx xxxxxxxx xx##xxxx
    =
GPIOC_CRH	xxxxxxxx xxxxxxxx xxxxxxxx xx11xxxx
-----------------------------------------------------------------------------
GPIOC_CRH &amp;= ~(3 &lt;&lt; 6);.//把PC9管脚配置为推挽输出
-----------------------------------------------------------------------------
3		00000000 00000000 00000000 00000011
3&lt;&lt;6		00000000 00000000 00000000 11000000
~(3&lt;&lt;6)		11111111 11111111 11111111 00111111
    &amp;
GPIOC_CRH	xxxxxxxx xxxxxxxx xxxxxxxx ##11xxxx
    =
GPIOC_CRH	xxxxxxxx xxxxxxxx xxxxxxxx 0011xxxx
-----------------------------------------------------------------------------
#define GPIOC_ODR *(volatile unsigned int *)(0x40011000 + 0x0C)
GPIOC_ODR &amp;= ~(1 &lt;&lt; 9);//把PC9管脚输出低电平(亮灯)

GPIOC_ODR |= (1 &lt;&lt; 9);//把PC9管脚输出高电平(灭灯)
</code></pre>
<h1 id="四-通过开发板原理图查看芯片的管脚"><a href="#四-通过开发板原理图查看芯片的管脚" class="headerlink" title="四.通过开发板原理图查看芯片的管脚"></a>四.通过开发板原理图查看芯片的管脚</h1><pre><code>    打开&lt;STM32RBT6\开发板原理图&gt;目录下&lt;MCU.pdf&gt;和&lt;Periph.pdf&gt;
    LED0	PC1
    LED1	PC2
    LED2	PC3
    输出高电平,灯亮
    输出低电平,灯灭
    需要操作GPIOC_CRL(端口配置低寄存器)以及
        GPIOC_ODR(端口输出数据寄存器)
</code></pre>
<h1 id="五-写程序驱动LED灯"><a href="#五-写程序驱动LED灯" class="headerlink" title="五.写程序驱动LED灯"></a>五.写程序驱动LED灯</h1><pre><code>    1.通过开发板原理图找到LED灯连接的管脚
    2.分析模块的工作方式
    3.把最近的一个项目工程拷贝一份重命名一下
    4.在&lt;02led/mylib&gt;目录中新建&lt;led.c&gt;和&lt;led.h&gt;
    5.在&lt;02led/project&gt;目录中找到项目工程文件,并且打开
    6.在Keil的左边侧边栏中的mylib组内添加led.c文件
</code></pre>
<h1 id="六-举一反三"><a href="#六-举一反三" class="headerlink" title="六.举一反三"></a>六.举一反三</h1><pre><code>    大家通过&lt;02led&gt;的项目工程,尝试着搭建&lt;03beep&gt;的项目工程
    效果
    在流水灯的基础上加入蜂鸣器
    0 1 2
    0-&gt;1-&gt;2-&gt;0-&gt;1-&gt;2
    灯亮的同时蜂鸣器响,灯灭的同时蜂鸣器关闭

=================================
作业
1.把今天讲过的内容完完整整的复习一遍
2.把举一反三的内容做出来
3.刷题
课外
自己找音乐的编码把音乐通过蜂鸣器播放出来
=================================
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="naoemb"
      src="/images/%E5%BE%AE%E4%BF%A1%E5%A4%B4%E5%83%8F.jpg">
  <p class="site-author-name" itemprop="name">naoemb</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">65</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/hexgio" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hexgio" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:hexgio@outlook.com" title="E-Mail → mailto:hexgio@outlook.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/hexgio" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;hexgio" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://ynblog.cf/" title="关联博客 → https:&#x2F;&#x2F;ynblog.cf" rel="noopener" target="_blank"><i class=" fa-fw"></i>关联博客</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">naoemb</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">355k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">5:22</span>
</div>




















<span id="sitetime"></span>
<script language=javascript>
	function siteTime(){
		window.setTimeout("siteTime()", 1000);
		var seconds = 1000;
		var minutes = seconds * 60;
		var hours = minutes * 60;
		var days = hours * 24;
		var years = days * 365;
		var today = new Date();
		var todayYear = today.getFullYear();
		var todayMonth = today.getMonth()+1;
		var todayDate = today.getDate();
		var todayHour = today.getHours();
		var todayMinute = today.getMinutes();
		var todaySecond = today.getSeconds();
		/* 
		Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
		year - 作为date对象的年份，为4位年份值
		month - 0-11之间的整数，做为date对象的月份
		day - 1-31之间的整数，做为date对象的天数
		hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
		minutes - 0-59之间的整数，做为date对象的分钟数
		seconds - 0-59之间的整数，做为date对象的秒数
		microseconds - 0-999之间的整数，做为date对象的毫秒数
        */
		var t1 = Date.UTC(2020,02,13,15,00,00); //北京时间2018-2-13 00:00:00
		var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
		var diff = t2-t1;
		var diffYears = Math.floor(diff/years);
		var diffDays = Math.floor((diff/days)-diffYears*365);
		var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
		var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
		var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
		document.getElementById("sitetime").innerHTML=" 已运行"+/*diffYears+" 年 "+*/diffDays+" 天 "+diffHours+" 小时 "+diffMinutes+" 分钟 "+diffSeconds+" 秒";
	}
	siteTime();
</script>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
